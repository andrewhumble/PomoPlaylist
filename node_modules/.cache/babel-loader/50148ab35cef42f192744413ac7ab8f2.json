{"ast":null,"code":"import _defineProperty from\"/Users/andrewhumble/Documents/GitHub/pomoplaylist/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _classCallCheck from\"/Users/andrewhumble/Documents/GitHub/pomoplaylist/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/andrewhumble/Documents/GitHub/pomoplaylist/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/Users/andrewhumble/Documents/GitHub/pomoplaylist/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/Users/andrewhumble/Documents/GitHub/pomoplaylist/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React,{Component}from'react';import Confirmation from'./Confirmation';import Authentication from'./Authentication';import Choose from'./Choose';import Work from'./Work';import ShortBreak from\"./ShortBreak\";import LongBreak from\"./LongBreak\";import\"react-spotify-auth/dist/index.css\";import SpotifyWebApi from\"spotify-web-api-js\";import{jsx as _jsx}from\"react/jsx-runtime\";var PomoPlay=/*#__PURE__*/function(_Component){_inherits(PomoPlay,_Component);var _super=_createSuper(PomoPlay);function PomoPlay(){var _this;_classCallCheck(this,PomoPlay);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={step:1,accessToken:\"\",choice:\"\",choiceId:\"\",playlists:[],playlistsHash:{},workTime:\"25\",shortBreakTime:\"5\",longBreakTime:\"10\",playing:false,sessions:1};_this.nextStep=function(){var step=_this.state.step;_this.setState({step:step+1});};_this.setStep=function(input){_this.setState({step:input});};_this.prevStep=function(){var step=_this.state.step;_this.setState({step:step-1});};_this.handleChange=function(input){return function(e){if(Array.isArray([input])){_this.setState(_defineProperty({},input,e.target.value));if([input][0]===\"choice\"){_this.setState({choiceId:_this.state.playlistsHash[e.target.value]});}}else{_this.setState(_defineProperty({},input,e.target.value));}};};_this.incrementSessionCount=function(){var sessions=_this.state.sessions;_this.setState({sessions:sessions+1});};_this.handleToken=function(input){_this.setState({accessToken:[input][0].token});//this.setState({ username: [input].token });\nconsole.log([input]);};_this.getUserPlaylists=function(accessToken){var spotifyApi=new SpotifyWebApi();spotifyApi.setAccessToken(accessToken.token);spotifyApi.getUserPlaylists().then(function(response){var tempArr=[];var tempHash={};for(var i=0;i<response.items.length;i++){tempHash[response.items[i].name]=response.items[i].id;var tempObj=[];tempObj.push(response.items[i].name);tempObj.push(response.items[i].id);tempArr.push(tempObj);}_this.setState({playlistsHash:tempHash});_this.setState({playlists:tempArr});}).catch(function(e){console.log(e);});};_this.play=function(choiceId){console.log(_this.state.accessToken);var spotifyApi=new SpotifyWebApi();spotifyApi.setAccessToken(_this.state.accessToken);spotifyApi.play({context_uri:\"spotify:playlist:\"+choiceId}).then(function(response){console.log(response);_this.setState({playing:true});}).catch(function(e){console.log(e);});};_this.pause=function(choiceId){console.log(_this.state.accessToken);var spotifyApi=new SpotifyWebApi();spotifyApi.setAccessToken(_this.state.accessToken);spotifyApi.pause({context_uri:\"spotify:playlist:\"+choiceId}).then(function(response){console.log(response);_this.setState({playing:false});}).catch(function(e){console.log(e);});};return _this;}_createClass(PomoPlay,[{key:\"render\",value:function render(){var step=this.state.step;var _this$state=this.state,accessToken=_this$state.accessToken,choice=_this$state.choice,choiceId=_this$state.choiceId,playlistsHash=_this$state.playlistsHash,playlists=_this$state.playlists,workTime=_this$state.workTime,shortBreakTime=_this$state.shortBreakTime,longBreakTime=_this$state.longBreakTime,playing=_this$state.playing,sessions=_this$state.sessions;var values={accessToken:accessToken,choice:choice,playlists:playlists,playlistsHash:playlistsHash,choiceId:choiceId,workTime:workTime,shortBreakTime:shortBreakTime,longBreakTime:longBreakTime,playing:playing,sessions:sessions};switch(step){case 1:return/*#__PURE__*/_jsx(Authentication,{nextStep:this.nextStep,values:values,handleToken:this.handleToken,getUserPlaylists:this.getUserPlaylists});case 2:return/*#__PURE__*/_jsx(Choose,{prevStep:this.prevStep,nextStep:this.nextStep,handleChange:this.handleChange,values:values});case 3:return/*#__PURE__*/_jsx(Confirmation,{prevStep:this.prevStep,nextStep:this.nextStep,values:values,play:this.play,handleChange:this.handleChange});case 4:return/*#__PURE__*/_jsx(Work,{values:values,nextStep:this.nextStep,prevStep:this.prevStep,pause:this.pause,play:this.play,setStep:this.setStep,incrementSessionCount:this.incrementSessionCount});case 5:return/*#__PURE__*/_jsx(ShortBreak,{values:values,nextStep:this.nextStep,prevStep:this.prevStep,pause:this.pause,play:this.play,setStep:this.setStep,incrementSessionCount:this.incrementSessionCount});case 6:return/*#__PURE__*/_jsx(LongBreak,{values:values,nextStep:this.nextStep,prevStep:this.prevStep,pause:this.pause,play:this.play,setStep:this.setStep,incrementSessionCount:this.incrementSessionCount});default:// do nothing\n}}}]);return PomoPlay;}(Component);export{PomoPlay as default};","map":{"version":3,"sources":["/Users/andrewhumble/Documents/GitHub/pomoplaylist/src/components/PomoPlay.js"],"names":["React","Component","Confirmation","Authentication","Choose","Work","ShortBreak","LongBreak","SpotifyWebApi","PomoPlay","state","step","accessToken","choice","choiceId","playlists","playlistsHash","workTime","shortBreakTime","longBreakTime","playing","sessions","nextStep","setState","setStep","input","prevStep","handleChange","e","Array","isArray","target","value","incrementSessionCount","handleToken","token","console","log","getUserPlaylists","spotifyApi","setAccessToken","then","response","tempArr","tempHash","i","items","length","name","id","tempObj","push","catch","play","context_uri","pause","values"],"mappings":"qpBAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,MAAOC,CAAAA,YAAP,KAAyB,gBAAzB,CACA,MAAOC,CAAAA,cAAP,KAA2B,kBAA3B,CACA,MAAOC,CAAAA,MAAP,KAAmB,UAAnB,CACA,MAAOC,CAAAA,IAAP,KAAiB,QAAjB,CACA,MAAOC,CAAAA,UAAP,KAAuB,cAAvB,CACA,MAAOC,CAAAA,SAAP,KAAsB,aAAtB,CAGA,MAAO,mCAAP,CACA,MAAOC,CAAAA,aAAP,KAA0B,oBAA1B,C,8CAEqBC,CAAAA,Q,mUACnBC,K,CAAQ,CACNC,IAAI,CAAE,CADA,CAENC,WAAW,CAAE,EAFP,CAGNC,MAAM,CAAE,EAHF,CAINC,QAAQ,CAAE,EAJJ,CAKNC,SAAS,CAAE,EALL,CAMNC,aAAa,CAAE,EANT,CAONC,QAAQ,CAAE,IAPJ,CAQNC,cAAc,CAAE,GARV,CASNC,aAAa,CAAE,IATT,CAUNC,OAAO,CAAE,KAVH,CAWNC,QAAQ,CAAE,CAXJ,C,OAeRC,Q,CAAW,UAAM,CACf,GAAQX,CAAAA,IAAR,CAAiB,MAAKD,KAAtB,CAAQC,IAAR,CACA,MAAKY,QAAL,CAAc,CAAEZ,IAAI,CAAEA,IAAI,CAAG,CAAf,CAAd,EACD,C,OAGDa,O,CAAU,SAACC,KAAD,CAAW,CACnB,MAAKF,QAAL,CAAc,CAAEZ,IAAI,CAAEc,KAAR,CAAd,EACD,C,OAGDC,Q,CAAW,UAAM,CACf,GAAQf,CAAAA,IAAR,CAAiB,MAAKD,KAAtB,CAAQC,IAAR,CACA,MAAKY,QAAL,CAAc,CAAEZ,IAAI,CAAEA,IAAI,CAAG,CAAf,CAAd,EACD,C,OAGDgB,Y,CAAe,SAACF,KAAD,QAAW,UAACG,CAAD,CAAO,CAC/B,GAAIC,KAAK,CAACC,OAAN,CAAc,CAACL,KAAD,CAAd,CAAJ,CAA4B,CAC1B,MAAKF,QAAL,oBAAiBE,KAAjB,CAAyBG,CAAC,CAACG,MAAF,CAASC,KAAlC,GACA,GAAI,CAACP,KAAD,EAAQ,CAAR,IAAe,QAAnB,CAA6B,CAC3B,MAAKF,QAAL,CAAc,CAAET,QAAQ,CAAE,MAAKJ,KAAL,CAAWM,aAAX,CAAyBY,CAAC,CAACG,MAAF,CAASC,KAAlC,CAAZ,CAAd,EACD,CACF,CALD,IAKO,CACL,MAAKT,QAAL,oBAAiBE,KAAjB,CAAyBG,CAAC,CAACG,MAAF,CAASC,KAAlC,GACD,CACF,CATc,E,OAWfC,qB,CAAwB,UAAM,CAC5B,GAAQZ,CAAAA,QAAR,CAAqB,MAAKX,KAA1B,CAAQW,QAAR,CACA,MAAKE,QAAL,CAAc,CAAEF,QAAQ,CAAEA,QAAQ,CAAG,CAAvB,CAAd,EACD,C,OAGDa,W,CAAc,SAACT,KAAD,CAAW,CACvB,MAAKF,QAAL,CAAc,CAAEX,WAAW,CAAE,CAACa,KAAD,EAAQ,CAAR,EAAWU,KAA1B,CAAd,EACA;AACAC,OAAO,CAACC,GAAR,CAAY,CAACZ,KAAD,CAAZ,EACD,C,OAEDa,gB,CAAmB,SAAC1B,WAAD,CAAiB,CAClC,GAAM2B,CAAAA,UAAU,CAAG,GAAI/B,CAAAA,aAAJ,EAAnB,CACA+B,UAAU,CAACC,cAAX,CAA0B5B,WAAW,CAACuB,KAAtC,EACAI,UAAU,CACPD,gBADH,GAEGG,IAFH,CAEQ,SAACC,QAAD,CAAc,CAClB,GAAIC,CAAAA,OAAO,CAAG,EAAd,CACA,GAAIC,CAAAA,QAAQ,CAAG,EAAf,CACA,IAAK,GAAIC,CAAAA,CAAC,CAAG,CAAb,CAAgBA,CAAC,CAAGH,QAAQ,CAACI,KAAT,CAAeC,MAAnC,CAA2CF,CAAC,EAA5C,CAAgD,CAC9CD,QAAQ,CAACF,QAAQ,CAACI,KAAT,CAAeD,CAAf,EAAkBG,IAAnB,CAAR,CAAmCN,QAAQ,CAACI,KAAT,CAAeD,CAAf,EAAkBI,EAArD,CACA,GAAIC,CAAAA,OAAO,CAAG,EAAd,CACAA,OAAO,CAACC,IAAR,CAAaT,QAAQ,CAACI,KAAT,CAAeD,CAAf,EAAkBG,IAA/B,EACAE,OAAO,CAACC,IAAR,CAAaT,QAAQ,CAACI,KAAT,CAAeD,CAAf,EAAkBI,EAA/B,EACAN,OAAO,CAACQ,IAAR,CAAaD,OAAb,EACD,CACD,MAAK3B,QAAL,CAAc,CAAEP,aAAa,CAAE4B,QAAjB,CAAd,EACA,MAAKrB,QAAL,CAAc,CAAER,SAAS,CAAE4B,OAAb,CAAd,EACD,CAdH,EAeGS,KAfH,CAeS,SAACxB,CAAD,CAAO,CACZQ,OAAO,CAACC,GAAR,CAAYT,CAAZ,EACD,CAjBH,EAkBD,C,OAEDyB,I,CAAO,SAACvC,QAAD,CAAc,CACnBsB,OAAO,CAACC,GAAR,CAAY,MAAK3B,KAAL,CAAWE,WAAvB,EACA,GAAM2B,CAAAA,UAAU,CAAG,GAAI/B,CAAAA,aAAJ,EAAnB,CACA+B,UAAU,CAACC,cAAX,CAA0B,MAAK9B,KAAL,CAAWE,WAArC,EACA2B,UAAU,CACPc,IADH,CACQ,CACJC,WAAW,CAAE,oBAAsBxC,QAD/B,CADR,EAIG2B,IAJH,CAIQ,SAACC,QAAD,CAAc,CAClBN,OAAO,CAACC,GAAR,CAAYK,QAAZ,EACA,MAAKnB,QAAL,CAAc,CAAEH,OAAO,CAAE,IAAX,CAAd,EACD,CAPH,EAQGgC,KARH,CAQS,SAACxB,CAAD,CAAO,CACZQ,OAAO,CAACC,GAAR,CAAYT,CAAZ,EACD,CAVH,EAWD,C,OAED2B,K,CAAQ,SAACzC,QAAD,CAAc,CACpBsB,OAAO,CAACC,GAAR,CAAY,MAAK3B,KAAL,CAAWE,WAAvB,EACA,GAAM2B,CAAAA,UAAU,CAAG,GAAI/B,CAAAA,aAAJ,EAAnB,CACA+B,UAAU,CAACC,cAAX,CAA0B,MAAK9B,KAAL,CAAWE,WAArC,EACA2B,UAAU,CACPgB,KADH,CACS,CACLD,WAAW,CAAE,oBAAsBxC,QAD9B,CADT,EAIG2B,IAJH,CAIQ,SAACC,QAAD,CAAc,CAClBN,OAAO,CAACC,GAAR,CAAYK,QAAZ,EACA,MAAKnB,QAAL,CAAc,CAAEH,OAAO,CAAE,KAAX,CAAd,EACD,CAPH,EAQGgC,KARH,CAQS,SAACxB,CAAD,CAAO,CACZQ,OAAO,CAACC,GAAR,CAAYT,CAAZ,EACD,CAVH,EAWD,C,0DAED,iBAAS,CACP,GAAQjB,CAAAA,IAAR,CAAiB,KAAKD,KAAtB,CAAQC,IAAR,CACA,gBAWI,KAAKD,KAXT,CACEE,WADF,aACEA,WADF,CAEEC,MAFF,aAEEA,MAFF,CAGEC,QAHF,aAGEA,QAHF,CAIEE,aAJF,aAIEA,aAJF,CAKED,SALF,aAKEA,SALF,CAMEE,QANF,aAMEA,QANF,CAOEC,cAPF,aAOEA,cAPF,CAQEC,aARF,aAQEA,aARF,CASEC,OATF,aASEA,OATF,CAUEC,QAVF,aAUEA,QAVF,CAYA,GAAMmC,CAAAA,MAAM,CAAG,CACb5C,WAAW,CAAXA,WADa,CAEbC,MAAM,CAANA,MAFa,CAGbE,SAAS,CAATA,SAHa,CAIbC,aAAa,CAAbA,aAJa,CAKbF,QAAQ,CAARA,QALa,CAMbG,QAAQ,CAARA,QANa,CAObC,cAAc,CAAdA,cAPa,CAQbC,aAAa,CAAbA,aARa,CASbC,OAAO,CAAPA,OATa,CAUbC,QAAQ,CAARA,QAVa,CAAf,CAaA,OAAQV,IAAR,EACE,IAAK,EAAL,CACE,mBACE,KAAC,cAAD,EACE,QAAQ,CAAE,KAAKW,QADjB,CAEE,MAAM,CAAEkC,MAFV,CAGE,WAAW,CAAE,KAAKtB,WAHpB,CAIE,gBAAgB,CAAE,KAAKI,gBAJzB,EADF,CAQF,IAAK,EAAL,CACE,mBACE,KAAC,MAAD,EACE,QAAQ,CAAE,KAAKZ,QADjB,CAEE,QAAQ,CAAE,KAAKJ,QAFjB,CAGE,YAAY,CAAE,KAAKK,YAHrB,CAIE,MAAM,CAAE6B,MAJV,EADF,CAQF,IAAK,EAAL,CACE,mBACE,KAAC,YAAD,EACE,QAAQ,CAAE,KAAK9B,QADjB,CAEE,QAAQ,CAAE,KAAKJ,QAFjB,CAGE,MAAM,CAAEkC,MAHV,CAIE,IAAI,CAAE,KAAKH,IAJb,CAKE,YAAY,CAAE,KAAK1B,YALrB,EADF,CASF,IAAK,EAAL,CACE,mBACE,KAAC,IAAD,EACE,MAAM,CAAE6B,MADV,CAEE,QAAQ,CAAE,KAAKlC,QAFjB,CAGE,QAAQ,CAAE,KAAKI,QAHjB,CAIE,KAAK,CAAE,KAAK6B,KAJd,CAKE,IAAI,CAAE,KAAKF,IALb,CAME,OAAO,CAAE,KAAK7B,OANhB,CAOE,qBAAqB,CAAE,KAAKS,qBAP9B,EADF,CAWF,IAAK,EAAL,CACE,mBACE,KAAC,UAAD,EACE,MAAM,CAAEuB,MADV,CAEE,QAAQ,CAAE,KAAKlC,QAFjB,CAGE,QAAQ,CAAE,KAAKI,QAHjB,CAIE,KAAK,CAAE,KAAK6B,KAJd,CAKE,IAAI,CAAE,KAAKF,IALb,CAME,OAAO,CAAE,KAAK7B,OANhB,CAOE,qBAAqB,CAAE,KAAKS,qBAP9B,EADF,CAWF,IAAK,EAAL,CACE,mBACE,KAAC,SAAD,EACE,MAAM,CAAEuB,MADV,CAEE,QAAQ,CAAE,KAAKlC,QAFjB,CAGE,QAAQ,CAAE,KAAKI,QAHjB,CAIE,KAAK,CAAE,KAAK6B,KAJd,CAKE,IAAI,CAAE,KAAKF,IALb,CAME,OAAO,CAAE,KAAK7B,OANhB,CAOE,qBAAqB,CAAE,KAAKS,qBAP9B,EADF,CAWF,QACA;AAlEF,CAoED,C,sBAhNmChC,S,SAAjBQ,Q","sourcesContent":["import React, { Component } from 'react'\nimport Confirmation from './Confirmation'\nimport Authentication from './Authentication'\nimport Choose from './Choose'\nimport Work from './Work'\nimport ShortBreak from \"./ShortBreak\";\nimport LongBreak from \"./LongBreak\";\n\n\nimport \"react-spotify-auth/dist/index.css\";\nimport SpotifyWebApi from \"spotify-web-api-js\";\n\nexport default class PomoPlay extends Component {\n  state = {\n    step: 1,\n    accessToken: \"\",\n    choice: \"\",\n    choiceId: \"\",\n    playlists: [],\n    playlistsHash: {},\n    workTime: \"25\",\n    shortBreakTime: \"5\",\n    longBreakTime: \"10\",\n    playing: false,\n    sessions: 1,\n  };\n\n  // proceed to the next step\n  nextStep = () => {\n    const { step } = this.state;\n    this.setState({ step: step + 1 });\n  };\n\n  // set current step\n  setStep = (input) => {\n    this.setState({ step: input });\n  };\n\n  // go back to previous step\n  prevStep = () => {\n    const { step } = this.state;\n    this.setState({ step: step - 1 });\n  };\n\n  // handle field change\n  handleChange = (input) => (e) => {\n    if (Array.isArray([input])) {\n      this.setState({ [input]: e.target.value });\n      if ([input][0] === \"choice\") {\n        this.setState({ choiceId: this.state.playlistsHash[e.target.value] });\n      }\n    } else {\n      this.setState({ [input]: e.target.value });\n    }\n  };\n\n  incrementSessionCount = () => {\n    const { sessions } = this.state;\n    this.setState({ sessions: sessions + 1 });\n  };\n\n  // handle token change\n  handleToken = (input) => {\n    this.setState({ accessToken: [input][0].token });\n    //this.setState({ username: [input].token });\n    console.log([input]);\n  };\n\n  getUserPlaylists = (accessToken) => {\n    const spotifyApi = new SpotifyWebApi();\n    spotifyApi.setAccessToken(accessToken.token);\n    spotifyApi\n      .getUserPlaylists()\n      .then((response) => {\n        var tempArr = [];\n        var tempHash = {};\n        for (var i = 0; i < response.items.length; i++) {\n          tempHash[response.items[i].name] = response.items[i].id;\n          var tempObj = [];\n          tempObj.push(response.items[i].name);\n          tempObj.push(response.items[i].id);\n          tempArr.push(tempObj);\n        }\n        this.setState({ playlistsHash: tempHash });\n        this.setState({ playlists: tempArr });\n      })\n      .catch((e) => {\n        console.log(e);\n      });\n  };\n\n  play = (choiceId) => {\n    console.log(this.state.accessToken);\n    const spotifyApi = new SpotifyWebApi();\n    spotifyApi.setAccessToken(this.state.accessToken);\n    spotifyApi\n      .play({\n        context_uri: \"spotify:playlist:\" + choiceId,\n      })\n      .then((response) => {\n        console.log(response);\n        this.setState({ playing: true });\n      })\n      .catch((e) => {\n        console.log(e);\n      });\n  };\n\n  pause = (choiceId) => {\n    console.log(this.state.accessToken);\n    const spotifyApi = new SpotifyWebApi();\n    spotifyApi.setAccessToken(this.state.accessToken);\n    spotifyApi\n      .pause({\n        context_uri: \"spotify:playlist:\" + choiceId,\n      })\n      .then((response) => {\n        console.log(response);\n        this.setState({ playing: false });\n      })\n      .catch((e) => {\n        console.log(e);\n      });\n  };\n\n  render() {\n    const { step } = this.state;\n    const {\n      accessToken,\n      choice,\n      choiceId,\n      playlistsHash,\n      playlists,\n      workTime,\n      shortBreakTime,\n      longBreakTime,\n      playing,\n      sessions,\n    } = this.state;\n    const values = {\n      accessToken,\n      choice,\n      playlists,\n      playlistsHash,\n      choiceId,\n      workTime,\n      shortBreakTime,\n      longBreakTime,\n      playing,\n      sessions,\n    };\n\n    switch (step) {\n      case 1:\n        return (\n          <Authentication\n            nextStep={this.nextStep}\n            values={values}\n            handleToken={this.handleToken}\n            getUserPlaylists={this.getUserPlaylists}\n          />\n        );\n      case 2:\n        return (\n          <Choose\n            prevStep={this.prevStep}\n            nextStep={this.nextStep}\n            handleChange={this.handleChange}\n            values={values}\n          />\n        );\n      case 3:\n        return (\n          <Confirmation\n            prevStep={this.prevStep}\n            nextStep={this.nextStep}\n            values={values}\n            play={this.play}\n            handleChange={this.handleChange}\n          />\n        );\n      case 4:\n        return (\n          <Work\n            values={values}\n            nextStep={this.nextStep}\n            prevStep={this.prevStep}\n            pause={this.pause}\n            play={this.play}\n            setStep={this.setStep}\n            incrementSessionCount={this.incrementSessionCount}\n          />\n        );\n      case 5:\n        return (\n          <ShortBreak\n            values={values}\n            nextStep={this.nextStep}\n            prevStep={this.prevStep}\n            pause={this.pause}\n            play={this.play}\n            setStep={this.setStep}\n            incrementSessionCount={this.incrementSessionCount}\n          />\n        );\n      case 6:\n        return (\n          <LongBreak\n            values={values}\n            nextStep={this.nextStep}\n            prevStep={this.prevStep}\n            pause={this.pause}\n            play={this.play}\n            setStep={this.setStep}\n            incrementSessionCount={this.incrementSessionCount}\n          />\n        );\n      default:\n      // do nothing\n    }\n  }\n}\n"]},"metadata":{},"sourceType":"module"}